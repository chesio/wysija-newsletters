jQuery(function(r){function e(){r("#manage_subscriptions").attr("checked")?r(".manage_subscriptions").fadeIn():r(".manage_subscriptions").fadeOut()}function i(e){null===e?r.each(r(".page_select"),function(){r("#"+r(this).attr("id")+"-links-"+r(this).val()).fadeIn()}):(id_section="#"+r(e).attr("id")+"-links",r(id_section+" span").hide(),r(id_section+"-"+r(e).val()).fadeIn())}function n(){switch(r("#sending-method-smtp").attr("checked")&&(r('#smtp-port, #smtp-secure, #smtp-login, #smtp-auth-1, label[for="smtp-auth-"]').parent().parent().show(),r("label[for='smtp-password']").html(wysija_translations.password),t()),r("#restapipossible").hide(),r("#smtp-host").val()){case"smtp.gmail.com":""==y&&(r("#smtp-port").val("465"),r("#smtp-secure").val("ssl"),r("#smtp-login").val("your_username@gmail.com"));break;case"smtp.sendgrid.net":r("#sending-method-smtp").is(":checked")?r("#restapipossible").show():r("#restapipossible").hide();break;case"mailpoet.com":case"sparkpost.com":r('#smtp-port, #smtp-secure, #smtp-login, label[for="smtp-auth-"]').parent().parent().hide(),r("label[for='smtp-password']").html(wysija_translations.api);break;case"":""==y&&(r("#smtp-port").val("25"),r("#smtp-secure").val("0"),r("#smtp-login").val(""));break;default:r("#sending-method-smtp").is(":checked")&&r('#smtp-port, #smtp-secure, #smtp-login, #smtp-auth-1, label[for="smtp-auth-"]').parent().parent().show()}""==y&&r("#smtp-secure").change(),r("#smtp-rest").trigger("change")}function t(){"smtp"==r('input[name="wysija[config][sending_method]"]:checked').val()&&("none"!=r("#restapipossible").css("display")&&r("#smtp-rest").attr("checked")?(r('#smtp-port, #smtp-secure, #smtp-auth-1, label[for="smtp-auth-"]').parent().parent().hide(),r(".choice-no-restapi").hide()):(r('#smtp-port, #smtp-secure, #smtp-auth-1, label[for="smtp-auth-"]').parent().parent().show(),r(".choice-no-restapi").show()))}function a(){1===parseInt(r('input[name="wysija[config][confirm_dbleoptin]"]:checked').attr("value"))?r(".confirmemail").fadeIn():r(".confirmemail").fadeOut()}function s(){var e=r(".mailpoet-frequency_warning"),i=r("#sending-emails-each"),n=["one_min","two_min","five_min","ten_min"];-1!==r.inArray(i.val(),n)?e.removeClass("hidden"):e.addClass("hidden")}function o(){return"gmail"==r('input[name="wysija[config][sending_method]"]:checked').val()}function c(){o()?0<r('select[name="wysija[config][sending_emails_each]"] option[value="hourly"]').length&&(r("#sending-emails-number").val("20"),r('select[name="wysija[config][sending_emails_each]"]').val("hourly"),r("#sending-emails-number").attr("readonly","readonly"),r('select[name="wysija[config][sending_emails_each]"]').attr("disabled","disabled")):(r('select[name="wysija[config][sending_emails_each]"]').removeAttr("disabled"),r("#sending-emails-number").removeAttr("readonly"))}function d(){return wysijaAJAX.task="bounce_connect",wysijaAJAX.data=r("form").serializeArray(),wysijaAJAX.popTitle=wysijatrans.bounceconnect,wysijaAJAX.dataType="json",wysijaAJAXcallback.onSuccess=function(e){var i="";return e.result.result&&(i='<a class="bounce-submit button-secondary" href2="admin.php?page=wysija_campaigns&action=test_bounce">'+wysijatrans.processbounce+"</a>"),displaychange?r(".allmsgs.ui-dialog-content.ui-widget-content").append(i):r("#bounce-connector").after(i),!0},r.WYSIJA_SEND(),!1}function l(){return wysijaAJAX.task="bounce_process",wysijaAJAX._wpnonce=wysijanonces.config.bounce_process,wysijaAJAX.data=r("form").serializeArray(),wysijaAJAX.popTitle=wysijatrans.processbounceT,wysijaAJAX.dataType="html",r(".allmsgs").dialog(),r.WYSIJA_SEND(),!1}function m(){void 0!==this?r.each(r(".activateInput"),function(){h(this)}):h(this)}function h(e){r(e).attr("checked")?r("#"+r(e).attr("id")+"_linkname").fadeIn():r("#"+r(e).attr("id")+"_linkname").fadeOut()}function u(){subscribersCountList=[],r(".subscribers-count-list").each(function(){r(this).is(":checked")&&subscribersCountList.push(r(this).val())}),shortCode="[",shortCode+="wysija_subscribers_count",0<subscribersCountList.length&&(shortCode+=' list_id="'+subscribersCountList.join()+'" '),shortCode+="]",r(".subscribers-count-shortcode").val(shortCode)}function p(){switch(r("#ms-restapipossible").hide(),r("#ms-smtp-host").val()){case"smtp.gmail.com":""==b&&(r("#ms-smtp-port").val("465"),r("#ms-smtp-secure").val("ssl"),r("#ms-smtp-login").val("your_username@gmail.com"));break;case"smtp.sendgrid.net":r("#ms-restapipossible").show();break;case"":""==b&&(r("#ms-smtp-port").val("25"),r("#ms-smtp-secure").val("0"),r("#ms-smtp-login").val(""))}""==b&&r("#ms-smtp-secure").change()}function g(){"smtp"==r('input[name="wysija[config][ms_sending_method]"]:checked').val()&&("none"!=r("#ms-restapipossible").css("display")&&r("#ms-smtp-rest").attr("checked")?r(".ms-choice-no-restapi").hide():r(".ms-choice-no-restapi").show())}function f(){-1!==r.inArray(r("#ms-sending-emails-each").val(),["one_min","two_min","five_min","ten_min"])?r(".ms-choice-under15").show():r(".ms-choice-under15").hide()}function w(){"one-for-all"==r('input[name="wysija[config][ms_sending_config]"]:checked').val()?r(".choice-one-for-all").show():r(".choice-one-for-all").hide()}var y=r("#smtp-login").val();r(".hidechoice").hide(),r(".choice-sending-method-"+r('input[name="wysija[config][sending_method]"]:checked').val()).show(),r('input[name="wysija[config][sending_method]"]').change(function(){r(".hidechoice").hide(),r(".choice-sending-method-"+this.value).show(),c()}),r("#sending-emails-each").change(function(){s()}),r("#linksendingmethod").click(function(){r("#tabs").tabs("select",r(this).attr("href"))}),r("#mainmenu li a").click(function(){r("#redirecttab").val(r(this).attr("href"))}),r('input[name="wysija[config][confirm_dbleoptin]"]').change(a),r("#confirm_dbleoptin-1").click(function(){return confirm(wysijatrans.doubleoptinon)}),r("#confirm_dbleoptin-0").click(function(){return confirm(wysijatrans.doubleoptinoff)}),r('input[name="wysija[config][sending_emails_site_method]"]').change(function(){"sendmail"==r('input[name="wysija[config][sending_emails_site_method]"]:checked').val()?r("#p-sending-emails-site-method-sendmail-path").show():r("#p-sending-emails-site-method-sendmail-path").hide()}),r('input[name="wysija[config][sending_emails_site_method]"]').change(),r(".page_select").change(function(){i(this)}),r("#manage_subscriptions").change(function(){e()}),r("#smtp-host").keyup(n),r("input.mailpoet-delivery-method").on("change",n),r("#smtp-rest").on("change",t),r("#button-regenerate-dkim").click(function(){return r("#sending-emails-site-method-phpmail").attr("checked","checked"),r("#dkim_regenerate").val("regenerate"),r("#wysija-settings").submit(),!1}),r("#bounce-connector").click(d),r(document).on("click",".bounce-submit",function(){return l(),r(".allmsgs").dialog("close"),tb_show(wysijatrans.processbounceT,r(this).attr("href2")+"&KeepThis=true&TB_iframe=true&height=400&width=600",null),tb_showIframe(),!1}),r(".forwardto").change(function(){r(this).attr("checked")?r("#"+r(this).attr("id")+"_input").show():r("#"+r(this).attr("id")+"_input").hide()}),r.each(r(".hideifnovalue"),function(){""==r(this).find("input").val()&&r(this).hide()}),r("#wysija-settings").submit(function(){var i=!1;if(r(".bounce-forward-email").each(function(){var e=trim(r(this).val());""!==e&&e==r("#bounce_email").val()&&(r('#wysija-tabs a[href="#bounce"]').trigger("click"),r('#wysija-innertabs a[href="#actions"]').trigger("click"),r(this).css("border","1px solid #CC0000"),r("#bounce-msg-error").addClass("error"),r("#bounce-msg-error").html(wysijatrans.errorbounceforward),i=!0)}),i)return!1;r('select[name="wysija[config][sending_emails_each]"]').removeAttr("disabled")}),r("#bounce-process-auto").attr("checked")?r("#bounce-frequency").show():r("#bounce-frequency").hide(),r("#bounce-process-auto").change(function(){r(this).attr("checked")?r("#bounce-frequency").show():r("#bounce-frequency").hide()}),r(".activateInput").change(m),r(document).on("click","#wysija-innertabs .nav-tab",function(e,i){var n,t=r(".wysija-innerpanel"),a=r("#wysija-innertabs").children(".nav-tab"),s=r(this),o=s.attr("href").replace("#",""),c={};return void 0===i&&(i=!0),t.each(function(e,i){var n=r(i);c[n.attr("id")]=n}),n=c[o],a.removeClass("nav-tab-active"),s.addClass("nav-tab-active"),t.not(".hidden").addClass("hidden"),n.removeClass("hidden"),i&&(window.location.hash="inner-tab-"+o),n.trigger("shown.innertab.mailpoet"),!1}),r(document).on("click","#wysija-tabs .nav-tab",function(e,i){var n,t=r(".wysija-panel"),a=r("#wysija-tabs").children(".nav-tab"),s=r(this),o=s.attr("href").replace("#",""),c={};return void 0===i&&(i=!0),t.each(function(e,i){var n=r(i);c[n.attr("id")]=n}),n=c[o],a.removeClass("nav-tab-active"),s.addClass("nav-tab-active"),t.not(".hidden").addClass("hidden"),n.removeClass("hidden"),i&&(window.location.hash="tab-"+o),n.trigger("shown.tab.mailpoet"),!1}),r(document).on("click","#tip-send-with",function(e){r('.nav-tab[href="#sendingmethod"]').trigger("click"),e.preventDefault()}),r(window).load(function(){if(0<window.location.hash.length){var e=window.location.hash.replace("tab-","");r('#wysija-tabs .nav-tab[href="'+e+'"]').trigger("click")}else r("#wysija-tabs .nav-tab").first().trigger("click",!1);if(1===window.location.hash.indexOf("inner-tab")){var i=r('#wysija-innertabs .nav-tab[href="'+window.location.hash.replace("inner-tab-","")+'"]').trigger("click");r('#wysija-tabs .nav-tab[href="#'+i.parents(".wysija-panel").attr("id")+'"]').trigger("click",!1)}else r("#wysija-innertabs .nav-tab-active").trigger("click",!1)}),r(document).ready(function(){c(),s(),a(),m(),n(),t(),i(null),e(),r(".subscribers-count-list").change(u),r("#analytics-0").is(":checked")&&r("#advanced .industry").hide(),r("#analytics-1").change(function(){"1"==r(this).val()&&r("#advanced .industry").show()}),r("#analytics-0").change(function(){"0"==r(this).val()&&r("#advanced .industry").hide()}),r("#recaptcha-0").is(":checked")&&r("#advanced .recaptcha").hide(),r("#recaptcha-1").change(function(){"1"==r(this).val()&&r("#advanced .recaptcha").show()}),r("#recaptcha-0").change(function(){"0"==r(this).val()&&r("#advanced .recaptcha").hide()}),0<r("#"+getURLParameter("scroll_to")).length&&(r("html,body").animate({scrollTop:r("#"+getURLParameter("scroll_to")).offset().top-r("#wpadminbar").height()},500),r("#"+getURLParameter("scroll_to")).css({"background-color":"#f8fcff","font-size":"16px","font-weight":"bold"}))}),r("#dkimpub, #domainrecord, .subscribers-count-shortcode").click(function(){this.select()});var b=r("#ms-smtp-login").val();r(".ms-hidechoice").hide(),r(".ms-choice-sending-method-"+r('input[name="wysija[config][ms_sending_method]"]:checked').val()).show(),r('input[name="wysija[config][ms_sending_method]"]').change(function(){r(".ms-hidechoice").hide(),r(".ms-choice-sending-method-"+this.value).show()}),r("#ms-sending-emails-each").change(function(){f()}),r('input[name="wysija[config][ms_sending_config]"]').change(function(){w()}),r('input[name="wysija[config][ms_sending_emails_site_method]"]').change(function(){"sendmail"==r('input[name="wysija[config][ms_sending_emails_site_method]"]:checked').val()?r("#ms_p-sending-emails-site-method-sendmail-path").show():r("#ms_p-sending-emails-site-method-sendmail-path").hide()}),r('input[name="wysija[config][ms_sending_emails_site_method]"]').change(),r("#ms-smtp-host").keyup(p),r("input.mailpoet-delivery-method").on("change",p),r("#ms-smtp-rest").change(g),r.each(r(".hideifnovalue"),function(){""===r(this).find("input").val()&&r(this).hide()}),r("table.capabilities_form .view_all").click(function(){r("table.capabilities_form tr.hidden").removeClass("hidden"),objTr=r(this).parents("tr")[0],r(objTr).remove()}),r(".mailpoet-test-delivery").on({click:function(e){return e.preventDefault(),"network"===r(".mailpoet-delivery-method:checked").val()||r(this).data("multisite")?(wysijaAJAX.task="send_test_mail_ms",wysijaAJAX._wpnonce=wysijanonces.config.send_test_mail_ms):(wysijaAJAX.task="send_test_mail",wysijaAJAX._wpnonce=wysijanonces.config.send_test_mail),wysijaAJAX.data=r("form").serializeArray(),wysijaAJAX.popTitle=wysijatrans.testemail,wysijaAJAX.dataType="json",r.WYSIJA_SEND(),!1}}),r(document).ready(function(){r("#smtp-host").keyup(),w(),f(),p(),g()})}),window.mailpoet="object"==typeof window.mailpoet?window.mailpoet:{$:{}},function(e,n){"use strict";var i=n.mailpoet,t=i.fn={};t.getSendingMethod=function(){return i.$.sending_method instanceof jQuery||(i.$.sending_method=e('input[name="wysija[config][sending_method]"]')),i.$.sending_method.filter(":checked").val()},t.isGoodFromAddress=function(e){var i=e.split("@")[1];return void 0!==i&&""!==i&&i.toLowerCase()===n.location.host.toLowerCase()},t.isGmailAddress=function(e){var i=e.split("@")[1];return void 0!==i&&""!==i&&"gmail.com"===i.toLowerCase()}}(jQuery,window),function(e){"use strict";var i=window.mailpoet;e(document).ready(function(){"object"==typeof e.fn.tooltip&&(i.$.from_email=e("#from_email"),i.$.from_email.tooltip({animation:!0,placement:"bottom",trigger:"manual",html:!0,title:function(){return i.$.from_email.data("message")}}).on({"verifyEmail.mailpoet":function(){if(i.fn.isGoodFromAddress(i.$.from_email.val()))return i.$.from_email.data("message","").tooltip("hide");if("gmail"===i.fn.getSendingMethod())return i.$.from_email.data("message","").tooltip("hide");var e="";return e=i.fn.isGmailAddress(i.$.from_email.val())?mpEmailCheck.gmailText:mpEmailCheck.text,i.$.from_email.is(":visible")?i.$.from_email.data("message",e).tooltip("show"):i.$.from_email.tooltip("hide")},keyup:function(){i.$.from_email.trigger("verifyEmail.mailpoet")}}).trigger("verifyEmail.mailpoet"),i.$.panels=e(".wysija-panel"),i.$.panels.filter("#basics").on({"shown.tab.mailpoet":function(){i.$.from_email.trigger("verifyEmail.mailpoet")}}))})}(jQuery),function(n){"use strict";var t=window.mailpoet;n(document).on({ready:function(){t.$.geeky=n(".mailpoet-geeky-toggle"),t.$.geeky.data("l18n",{hide:t.$.geeky.data("hide"),show:t.$.geeky.text()}),t.$.geeky_rows=n(".super-advanced"),t.$.geeky.on({click:function(e){e.preventDefault();var i=t.$.geeky.data("l18n");t.$.geeky.hasClass("is_toggled")?(t.$.geeky.removeClass("is_toggled").text(i.hide),t.$.geeky_rows.removeClass("hidden"),e.originalEvent!==undefined&&n.cookie("geeky_option",1)):(t.$.geeky.addClass("is_toggled").text(i.show),t.$.geeky_rows.addClass("hidden"),e.originalEvent!==undefined&&n.cookie("geeky_option",0))}}),1==n.cookie("geeky_option")?t.$.geeky.trigger("click"):t.$.geeky_rows.addClass("hidden")}})}(jQuery);